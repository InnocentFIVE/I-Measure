\section{外测度与测度的完备化}\label{外测度与测度的完备化}

\begin{quote}
    零测集\,$\mathinner{\ldotp \ldotp \ldotp\ldotp \ldotp \ldotp}$\,就像是被冻住的青蛙, 应该和英吉利牛肉一起冰冻冷藏起来, 不再看见.
\end{quote}

在历史中, ``外测度''这一思想出现得比如今的``测度''概念要早, 早在 Riemann 积分时期我们就已经有这种``外测''的思想了: 一个著名的例子是 Jordan 容度. 令``简单集合''是平面 $\mathbb R^2$ 上由有限个矩形边挨着边拼成的集合. 令
\[
    \operatorname{out}\operatorname{area} A\coloneqq\bigcap_{\mkern-8mu K,\textit{简单集合}\mkern-8mu \atop A\subseteq K}K
    .\]
同时, 由于``简单集合''的面积是可以良好定义的------所有组成``简单集合''的矩形面积之和. 记为 $\|K\|$. 则定义 $A$ 的 Jordan 外容度为
\[
    \operatorname{out}\operatorname{cont}A\coloneqq \inf\set{\|K\| \given K~\textit{是简单集合},\,A\subseteq K}.
\]
同时对内部的情形亦然:
\[
    \operatorname{inn}\operatorname{area} A\coloneqq \bigcup_{\mkern-8mu K,\textit{简单集合}\mkern-8mu \atop K\subseteq A}K\enote,\quad\operatorname{inn}\operatorname{cont}A\coloneqq \sup\set{\|K\| \given K~\textit{是简单集合},\,K\subseteq A}.
\]
这本应该是测度的直观思想, 但事实上有太多细节没有在这个定义处理到\enote.

一个例子来自这个集合 $Q=[\,0,1\,]^2\cup\mathbb Q^2$. 由于有理数之间会惨杂着无理数, 因此这个集合里不可能包得住任意的矩形, 这意味着包含于 $Q$ 的简单集合只有有限个单点拼成的集合. 而这些玩意面积是 $0$. 故 $\operatorname{inn}\operatorname{cont}Q=0$; 相反地, $\operatorname{out}\operatorname{cont}Q=1$, 这可以由以下观察得到:
\begin{itemize}
    \item $Q\subseteq [\,0,1\,]^2$, 故 $\operatorname{out}\operatorname{cont}Q\leqslant \|[\,0,1\,]^2\| = 1$;
    \item 如果有有限个矩形 $T_1$, $\dots$, $T_n$, 他们的面积和 $a$ 小于 $1$, 则他们不能盖住 $[\,0,1\,]^2$.
    \item $[\,0,1\,]^2 \setminus \bigcup_{j=0}^n T_j$ 的面积至少有 $1-a$, 事实上, $[\,0,1\,]^2 \setminus \bigcup_{j=0}^n T_j$ 中存在 $[\,0,1\,]^2$ 中的有理数. 这意味着 $T_1$, $\dots$, $T_n$ 不能覆盖 $Q$.
\end{itemize}
故 $\operatorname{inn}\operatorname{cont}Q\neq\operatorname{out}\operatorname{cont}Q$, 出现这种情况我们可能会把原因归咎于 $Q$ 不是个良好的集合. 但他明明只是 $[\,0,1\,]^2$ 上的有理点集\enote!

这么朴素的集合都要冠以``不可测集''实在是太天理难容了. 因此只能是 Jordan (内)外容度并不是我们想要的测度.

更``外测''的想法来自 Axel Harnack\enote, 他用有限个区间覆盖我们想要讨论的集合 $A$, 然后计算这些区间的总长度, 最后和 Jordan 容度一样他取了 $\inf$ 以保证估计尽可能精确:
\[
    \operatorname{vol}A = \inf\set[\Big]{\sum_{j=0}^n(b_j-a_j)\given A\subseteq\bigcup_{j=0}^n(a_j,b_j]}.
\]
这个处理与 Jordan 容度异曲同工. 同时如果他没有定义内测度的话, 我们也可以用 $\operatorname{vol}$ 代替集合的``测度''而忽略什么不可测集. 但是 Harnack 的处理对以上讨论的无限稠密集依然会出问题:

和 Jordan 容度的讨论一样, Harnack的定义也在稠密可数集$\mathbb Q$上栽了跟头. 仿照上述讨论, 我们得到 $\operatorname{vol}([\,0,1\,]\cap\mathbb Q)=1$, 但是对无理数 $[\,0,1\,]\setminus\mathbb Q$ 讨论会得到一样的$\operatorname{vol}$结果, 这意味着:
\[
    \operatorname{vol}([\,0,1\,]\cap\mathbb Q) + \operatorname{vol}([\,0,1\,]\setminus\mathbb Q) = 2 \neq \operatorname{vol}([\,0,1\,])
    .\]
这直戳了当地告诉我们这不是个测度, 虽然在那个年代``测度''这个词并不是现在这个意思, 但作为连最基本要求有限可加性都做不到还是算了吧\,$\mathinner{\ldotp \ldotp \ldotp\ldotp \ldotp \ldotp}$\,总不能把 $[\,0,1\,]\cap\mathbb Q$ 和 $[\,0,1\,]\setminus\mathbb Q$ 视为不可测集吧?

到了现在我们发现, 虽然测度的定义是易于理解的, 但是要找的一个在 $\mathbb R$ 上的测度让其对应的可测集尽可能大是困难的, 这也是 Lebesgue 在 1902 年那篇论文中的精髓.

Lebesgue 改进了 Harnack 的定义------他把``有限个区间''换成了``可数个区间'', 且允许在合理的情形下处理$\infty$:
\[
    m(A) = \inf\set[\bigg]{\sum_{j\geqslant 0}(b_j-a_j)\enote\given A\subseteq\bigcup_{j\geqslant 0}(a_j,b_j\,]\enote}
\]
虽然看上去是个平凡的举措, 但是却打败了上面的反例: 令 $\{r_n\}_{n\geqslant 0}$ 是 $[\,0,1\,]\cap\mathbb Q$ 的一个排列, 则 $\forall\varepsilon>0$, $[\,0,1\,]\cap\mathbb Q\subseteq\bigcup_{n\geqslant 0}(r_n-\varepsilon/2^n,r_n+\varepsilon/2^n)$, 故 $m([\,0,1\,]\cap\mathbb Q)<2\varepsilon$. 取极限得到 $m([\,0,1\,]\cap\mathbb Q)=0$.

由于无理数不可数, 故不可以同讨论有理数那样讨论无理数. 事实上可以证明 $m([\,0,1\,]\setminus\mathbb Q)=1$.

考虑一下抽象的情形: 令 $\mathscr A\subseteq\mathcal P(X)$ 是基础集合\enote, 我们意欲用 $\mathscr A$ 中集合来度量 $\mathcal P(X)$ 之子集. 借以 Lebesgue 构建外测度的方法\enote:
\[
    \mu^*(E) = \inf\set[\Big]{\sum_{j\geqslant 0}\rho (A_j)\given E\subseteq\bigcup_{j\geqslant 0}A_j,\,A_j\in\mathscr A}
    .\]
其中 $\rho :\mathscr A\to [\,0,\infty\,]$ 是对基础集合的度量.

不难看出 Lebesgue 测度就是 $\mathscr A$ 是所有开区间组成的集合, $\rho ((a,b))=b-a$ 之情形. 其次, 由于直观上的感觉, Lebesgue 测度(或者说外测度)会比原来集合的``测度''要大------此乃从集合外部逼近所致. 因此:
\[
    \mu^*\biggl(\,\bigcup_{n\geqslant 0}E_n\biggr) \leqslant \sum_{n\geqslant 0}\mu^*(E_n),\quad A\subseteq B \implies \mu^*(A)\leqslant \mu^*(B)
    .\]
都是自然的. 唯一不动的是 $\mu^*(\varnothing)=0$, 因为你不需要选取 $\mathscr A$ 中元就可以将其包起来.

为了考虑外测度比原来集合的``测度''大这件事, 我们考虑以下条件:
\[
    \mu^*(E) + \mu^*(E^\complement) = \mu^*(X).
\]
这同时保证了集合 $E$ 和它的补集 $E^\complement$ 的外测度不会``过大'', 也直接说明了我们的估计是完全精准的. 唯一的问题在于当 $\mu^*(X) =\infty$ 的情形, 此时 $\mu^*(E)$, $\mu^*(E^\complement)$ 必至少有一个为无穷, 从而等式平凡地成立. 因此最后, 只有以下条件是满足我们的想法的:
\[
    \mu^*(E\cup K) + \mu^*(E^\complement\cup K) = \mu^*(K),\quad\forall K\subseteq X.
\]
这个条件被称为 Carathéodory 可测性条件, 在某种意义上体现了 Carathéodory 对测度有深刻的洞察\enote.

从文章中一开始就开始涉及的``可测性'', 直到现在其定义终于出现了. 回想起在第二节我们希望可测集是一个\;$\sigma $-代数, 我们不禁会问:
\[
    \{\,A\subseteq X\mid A\textit{ 是\;$\mu^*$-可测的}\,\}
    .\]
是否是一个\;$\sigma$-代数? 或者说这个 Carathéodory 可测性条件是如何避免所有潜在的悖论的? 为了打消这些怀疑, Carathéodory 证明了以下定理.

\begin{theorem}[Carathéodory]
    以上讨论的外测度 $\mu^*$ 对应的可测集构成一个\;$\sigma $-代数 $\mathcal M$, 且 $\mu^*|_{\mathcal M}$ 是一个 $\mathcal M $ 上的测度.
\end{theorem}

这意味着我们得到了以下行为链条:
\begin{center}
    \begin{tikzcd}[column sep = scriptsize]
        \textit{对基本集合的度量}\arrow[r] & \textit{外测度}\arrow[rrrr,"~\text{Carathéodory}~" description] &  &  &  & \textit{一个在\;$\sigma $-代数上的测度}
    \end{tikzcd}
\end{center}

同时, Carathéodory 还证明, 有外测度限制在其可测集对应\;$\sigma $-代数上的测度满足:
\begin{defi}[完备测度]
    若 $E$ 是可测集且测度为 $0$, 则 $\forall A\subseteq E$, $A$ 可测且测度为 $0$.
\end{defi}
这个``完备测度''是相当特殊的, 至于其作用: 我们在后续(尤其是积分理论)的讨论中, 需要经常对零测集翻来覆去, 有时我们甚至会得到``两个函数 $f$, $g$ 在一个零测集外面相等''的条件, 我们管这叫``几乎处处相等''. 按照我们的想法, $f$, $g$ 几乎就是同一个函数: 因为我们应该可以随意地忽略零测集才对. 但是零测集中的不可测子集可能会影响 $f$ 与 $g$ 的一些良好性质, 导致 $f$ 的良好性质不能通过``几乎处处相等''传递到 $g$. 一个例子: $\{\,x\mid f(x)=0\,\}$ 是一个可测的集合, 那么 $\{\,x\mid g(x)=0\,\} = \{\,x\mid f(x)=0\,\}\dif N$, 其中 $N$ 是某个零测集的子集. 我们希望它也是可测的, 这就有 $N$ 可测的要求.

因此, 完备的测度可以让大家在处理零测集的时候排除几乎所有的风险, 也是更符合直觉的测度. 对于不完备的测度, 我们可以通过一个暴力的方式来进行``完备化''. ``完备化''的精髓在于将零测集的子集全部加入可测集合构成的那个\;$\sigma $-代数之中. 令 $(X,\mathcal M,\mu )$ 是测度空间和其上的一个测度, 我们令
\[
    \overline{\mathcal M} = \set[\big]{A\cup B\given  A\in\mathcal M,\, B \textit{ 是某个\;$\mu $-零测集的子集}}\enote.
\]
在这个新\;$\sigma $-代数中我们定义一个延拓的测度 $\overline\mu(A\cup B) \coloneqq \mu (A)$\enote, 其中 $A\in\mathcal M$ 是可测集, $B$ 是某个\;$\mu $-零测集的子集.

我们现在总结一下.

完备测度算是一个警醒------它意味着零测集的子集并非是单纯的(或者是我们对测度的直观理解和其在\;$\sigma $-代数上的行为并非是完全一致的). 而外测度来自于非常古老的想法, 其欠缺的细节需要用 Carathéodory 定理来补充. 这看起来像是两个分支: 一个着眼于将零测集的子集加入可测集的行列, 另一个是先对全体子集赋予外测度再着眼于``可测''的子集. 而新的需求逼迫我们思考这两个分支之间的共同点.


\begin{center}
    \begin{tikzcd}[column sep = scriptsize]
        \textit{对基本集合的度量}\arrow[r]\arrow[rdd, "\mbox{\rule[-.5ex]{0pt}{1em}}\textit{如果这个``度量\!''刚好是个测度的话}" description, bend right = 20] & \textit{外测度}\arrow[rrr,"~\text{Carathéodory}~" description] & {} & {} & \textit{一个在\;$\sigma $-代数上的测度}\arrow[dd, equal, "\mbox{\rule[-.5ex]{0pt}{1em}}?" description] \\
        {}                                                                                                                                                     & {}       {}                                                    & {}                                                                                                               \\
                                                                                                                                                               & \textit{测度}\arrow[rrr, "~\textit{完备化}~" description]      & {} & {} & \textit{完备测度}
    \end{tikzcd}
\end{center}

回想下我们是如何构造外测度的:
\begin{enumerate}
    \item 先有一个``基本集合族'' $\mathscr A\subset\mathcal P(X)$, $X\in\mathscr A$;
    \item 然后是一个对此类集合的度量 $\rho :\mathscr A\to [\,0,\infty\,]$;
    \item 然后是外测度本身的构建: \[\mu^*(E) = \inf\set[\Big]{\sum_{j\geqslant 0}\rho (A_j)\given E\subseteq\bigcup_{j\geqslant 0}A_j,\,A_j\in\mathscr A};\]
    \item 接下来是用 Carathéodory 定理将其可测集拿出来, 构成一个\;$\sigma $-代数 $\mathcal M$;
    \item 最后我们马后炮地说 $\mu^*|_{\mathcal M}$ 是一个定义在该\;$\sigma $-代数上的(完备)测度.
\end{enumerate}
如果对基本集合的度量 $\rho $ 是一个测度(此时不妨设 $\mathscr A$ 是 $\sigma$-代数), 则外测度相当于是将测度 $\rho$ 延拓到 $\mathcal M$ 上. 而我们还有另外一种延拓手段------完备化: 将 $\rho $ 延拓到 $\overline{\mathscr A}$ 上. 但是我们不希望有太多乱七八糟的延拓------我只想要最大的那个.

以下定理某种程度上回答了这个问题:
\begin{theorem}
    若 $\rho $ 是\;$\sigma $-有限测度, 则外测度延拓与完备化延拓无异.
\end{theorem}
这意味着外测度延拓的可测集并非那么不直观------它恰恰是 $\mathscr A$ 中的集合并上一个\;$\mu $-零测集子集得到的. 这某种意义上是也算是对可测集结构的一种描述.

稍稍用下记号处理:\,\;$\mu $-零测集子集实际上就是\,$\overline{\mu }$-零测集. 因此这些延拓也仅仅是在零测集里面做文章------就相当于我们在装满沙子的瓶子里再装下更小的沙子一样. 此之后外测度延拓与完备化延拓都不能再改进半分. 对 $\sigma$-有限的测度, 我们的延拓基本就到此为止了.

最后是完整的 Lebesgue 测度构建过程: 让我们一步到位: 考虑外测度
\[
    \mu ^*(E) = \inf\set[\Big]{\sum_{j\geqslant 0}(b_j-a_j)\given E\subseteq\bigcup_{j\geqslant 0}(a_j,b_j\,]}.
\]
然后我们知道, 这个外测度的可测集构成一个\;$\sigma $-代数 $\mathcal L$, 因此令 $m:\mathcal L\to [\,0,\infty\,]$, $E\mapsto \mu ^*(E)$. 我们的 Lebesgue 测度就构造完成了!

当然, 现在我们终于能够静下心来好好审视 $\mathcal L$ 了. 到底 $\mathcal L$ 长什么样子呢?

一个比较机灵的举措是, 我们注意到 $(a,b)$ 作为开区间是可测的, 由于可测集合构成一个\;$\sigma $-代数, 其必然包括由开集生成的 Borel\;$\sigma $-代数 $\mathcal B_{\mathbb R}$\enote. 然后就是一个比较肮脏的技巧: 令 $ \beta = m|_{\mathcal B_{\mathbb R}}$, 则其是个正经的测度, 我们用外测度延拓它:
\[
    \beta ^*(E) = \inf\set[\Big]{\sum_{j\geqslant 0}\beta (A_j)\given E\subseteq\bigcup_{j\geqslant 0}A_j,\,A_j\in\mathcal B_{\mathbb R}}
    .\]
我们发现 $\beta ^*=m$. 因为
\begin{itemize}
    \item $\mathcal B_{\mathbb R}$ 包含了所有的开区间, 因此其外测度延拓必然不会比仅仅由开区间外测度延拓来的 $m$ 更小;
    \item $\mathcal B_{\mathbb R}$ 上的延拓自然小于 $\mathcal L$ 上的延拓, 但是由于 $m$ 是\;$\sigma $-有限的, 故已经没法再通过外测度延拓了. 因此延拓得到的结果必然不会比 $m$ 更广阔.
\end{itemize}
然后我们直接奔向完备化------因为这个更能描述可测集中的元素. 即 $\overline{\mathcal B_{\mathbb R}}=\mathcal L$. 因此 $\mathcal L$ 中的元素必然是 $A\cup B$ 的形式, 其中 $A$ 是 Borel 集合, $B$ 是 Lebesgue 零测集.

Borel 集这一处理暗示我们也许可以将上文中的 $A$ 换成更简洁的, 更具有构造性的集合. 在一些尝试过后, 我们得到了以下定理:
\begin{theorem}\label{AcupN}
    $E\subseteq\mathbb R$ 是 Lebesgue 可测的当且仅当 $E = A\cup N$, 其中 $A$ 是可数个闭集的并, $N$ 是 Lebesgue 零测集. 或者当且仅当 $E=B\setminus N$, 其中 $B$ 是可数个开集的交, $N$ 是 Lebesgue 零测集.
\end{theorem}
以及极具外(和内)测度意义的(我们称为正规性)
\[
    \begin{aligned}
        m(E) & = \inf\set[\big]{m(A)\given E\subseteq A, A\textit{ 是 $\mathbb R$ 中的开集}}   \\
             & = \sup\set[\big]{m(A)\given A\subseteq E, A\textit{ 是 $\mathbb R$ 中的紧集}}.
    \end{aligned}
\]
当然, 考虑到 $(a,b)$ 的测度是平移不变的, 那么自然对由开区间生成的外测度也是平移不变的\enote. 同理, 令 $T$ 是数乘变换, 则 $m(E)=|\!\det T|\cdot m(E)$, $E\in\mathcal L$.

至于 $\mathbb R^n$ 上的 Lebesgue 测度和可测集, 我在这也只能提一嘴. 首先, $n$ 维的 Lebesgue 可测集 $\mathcal L^n$ 可以由以下生成元生成然后再完备化(你要用外测度延拓也行)得到:
\[
    \mathcal L^n = \overline{\mathcal M\biggl( \,\biggl\{\; \prod_{j=0}^n A_j\biggm|\forall j,\, A_j\in \mathcal L \,\biggr\} \, \biggr) }
    .\]
至于上面两个定理依然是成立的(证明类似, 但有些繁琐).